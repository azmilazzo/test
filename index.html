<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Companion Launcher</title>
  <style>
    body { font-family: sans-serif; margin: 20px; background: #fdf6f9; color: #333; }
    h1 { color: #c83e6f; }
    .section { margin-bottom: 20px; }
    label, select, input, button { display: block; margin: 10px 0; font-size: 16px; }
    #chat-container { display: none; border: 1px solid #ccc; padding: 10px; max-width: 600px; height: 400px; overflow-y: auto; background: white; }
    .message { margin: 5px 0; }
    .user { color: #0074D9; }
    .bot { color: #2ECC40; }
  </style>
</head>
<body><h1>Start Your AI Companion</h1><div class="section">
  <label for="model">Choose a model:</label>
  <select id="model">
    <option value="zephyr-7b-beta">Zephyr 7B Beta</option>
    <option value="neural-chat-7b">Neural Chat 7B</option>
    <option value="mistral-openhermes">Mistral OpenHermes</option>
  </select>
  <button onclick="launchColab()">Start AI Server</button>
</div><div class="section">
  <label for="api-url">Paste Your API URL:</label>
  <input type="text" id="api-url" placeholder="https://xxxx.trycloudflare.com/v1">
  <button onclick="connectChat()">Connect Chatbot</button>
</div><div id="chat-container">
  <h3>Chat with your AI Companion:</h3>
  <div id="chat-log"></div>
  <input type="text" id="user-input" placeholder="Say something...">
  <button onclick="sendMessage()">Send</button>
</div><script>
function launchColab() {
  const model = document.getElementById('model').value;
  const baseLink = 'https://colab.research.google.com/github/lostruins/koboldcpp/blob/concedo/colab.ipynb';
  const colabLink = `${baseLink}?model=${model}`;
  window.open(colabLink, '_blank');
}

let apiUrl = '';

function connectChat() {
  apiUrl = document.getElementById('api-url').value.trim();
  if (!apiUrl.endsWith('/v1')) {
    alert('Invalid API URL');
    return;
  }
  document.getElementById('chat-container').style.display = 'block';
}

async function sendMessage() {
  const input = document.getElementById('user-input');
  const msg = input.value.trim();
  if (!msg) return;
  input.value = '';
  addMessage('user', msg);

  const res = await fetch(`${apiUrl}/chat/completions`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      model: 'koboldcpp',
      messages: [
        { role: 'system', content: 'You are a friendly and romantic AI companion.' },
        { role: 'user', content: msg }
      ],
      temperature: 0.8
    })
  });

  const data = await res.json();
  const reply = data.choices?.[0]?.message?.content || '...';
  addMessage('bot', reply);
}

function addMessage(role, text) {
  const log = document.getElementById('chat-log');
  const div = document.createElement('div');
  div.className = 'message ' + role;
  div.textContent = (role === 'user' ? 'You: ' : 'AI: ') + text;
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
}
</script></body>
</html>